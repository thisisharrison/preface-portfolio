<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>To-Do List</title>
    </head>
    <body>
        <h1>TO-DO LIST</h1>

        <button id="new-task">New Task</button>

        <form id="new-task-form">
            <label for="task">Task</label>
            <input type="text" id="task" placeholder="Type task here" />

            <label for="progress">Progress</label>
            <input type="number" id="progress" placeholder="Type progress here in digit" />

            <label for="description">Description</label>
            <input type="text" id="description" placeholder="Type description here" />

            <input type="submit" value="Submit" />
        </form>

        <!-- Start with nothing at first -->
        <ul id="task-list"></ul>

        <!-- We want to show the tasks this way, but do it programmatically -->
        <!-- <ul>
            <li>
                <div>
                    <h3>Task Name</h3>
                    <p>Description</p>
                    <p>Progress in %</p>
                </div>
            </li>

            <li>
                <div>
                    <h3>Task Name</h3>
                    <p>Description</p>
                    <p>Progress in %</p>
                </div>
            </li>
        </ul> -->

        <script>
            // Form Submit
            const taskForm = document.querySelector("#new-task-form");
            taskForm.addEventListener("submit", handleSubmit);
            function handleSubmit(event) {
                event.preventDefault();
                let taskValue = document.querySelector("#task").value;
                let progressValue = document.querySelector("#progress").value;
                let descValue = document.querySelector("#description").value;
                if (taskValue === "" || progressValue === "" || descValue === "") {
                    alert("Can't have empty value");
                    return;
                }
                if (parseInt(progressValue) > 100 || parseInt(progressValue) < 0) {
                    alert("Progress must be within 0 to 100");
                    return;
                }
                // To do that we need to:
                // Create function to create <ul> if not created before, create <li> and the inside <div> with all the information
                // Then append this to the <ul>
                addTodo({
                    task: taskValue,
                    progress: progressValue,
                    description: descValue,
                });
                // clear inputs
                document.querySelector("#task").value = "";
                document.querySelector("#progress").value = "";
                document.querySelector("#description").value = "";
            }

            // Data is an object. very often that's how frontend will return information to server
            function addTodo(data) {
                const taskList = document.getElementById("task-list");
                const task = `
                    <li>
                        <div>
                            <h3>${data.task}</h3>
                            <p>${data.description}</p>
                            <p>${data.progress}</p>
                        </div>
                    </li>
                `;
                taskList.innerHTML += task;
            }

            // New Form button
            const taskButton = document.getElementById("new-task");
            taskForm.style.display = "none";
            taskButton.onclick = toggleTask;
            function toggleTask() {
                if (taskButton.innerText === "New Task") {
                    taskButton.innerText = "Close Task";
                    taskForm.style.display = "";
                } else {
                    taskButton.innerText = "New Task";
                    taskForm.style.display = "none";
                }
            }
        </script>
    </body>
</html>
