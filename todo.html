<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>To-Do List</title>
    </head>
    <body>
        <h1>TO-DO LIST</h1>

        <button id="new-task">New Task</button>

        <form id="new-task-form">
            <label for="task">Task</label>
            <input type="text" id="task" placeholder="Type task here" />

            <label for="progress">Progress</label>
            <input type="number" id="progress" placeholder="Type progress here in digit" />

            <label for="description">Description</label>
            <input type="text" id="description" placeholder="Type description here" />

            <input type="submit" value="Submit" />
        </form>

        <script>
            const taskForm = document.querySelector("#new-task-form");
            // what's appropriate event handler name for form submit?
            taskForm.addEventListener("submit", handleSubmit);

            // what should handle submit do? validate and then console.log form (for now)
            // first time seeing `event`: every event listener has this argument
            function handleSubmit(event) {
                // we don't like that it reloads our page. so prevent that
                event.preventDefault();
                // get the values on submission
                let taskValue = document.querySelector("#task").value;
                let progressValue = document.querySelector("#progress").value;
                let descValue = document.querySelector("#description").value;
                // we want to validate
                if (taskValue === "" || progressValue === "" || descValue === "") {
                    alert("Can't have empty value");
                    // don't finish the rest of the function
                    return;
                }
                // check type
                if (parseInt(progressValue) > 100 || parseInt(progressValue) < 0) {
                    alert("Progress must be within 0 to 100");
                    return;
                }
                // console log the data (for now)
                console.log({
                    task: taskValue,
                    progress: progressValue,
                    description: descValue,
                });
                // clear inputs
                document.querySelector("#task").value = "";
                document.querySelector("#progress").value = "";
                document.querySelector("#description").value = "";
            }

            const taskButton = document.getElementById("new-task");
            taskForm.style.display = "none";
            taskButton.onclick = toggleTask;
            function toggleTask() {
                if (taskButton.innerText === "New Task") {
                    taskButton.innerText = "Close Task";
                    taskForm.style.display = "";
                } else {
                    taskButton.innerText = "New Task";
                    taskForm.style.display = "none";
                }
            }
        </script>
    </body>
</html>
